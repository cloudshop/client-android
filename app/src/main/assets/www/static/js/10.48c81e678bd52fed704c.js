webpackJsonp([10],{"/PSv":function(t,s,e){t.exports=e.p+"static/img/shopping.af1b33a.png"},"9vpH":function(t,s,e){"use strict";(function(t){var i=e("mvHQ"),c=e.n(i),n=(e("wtEF"),e("WR8r"));e("L/O1");s.a={data:function(){return{flag:!1,productSkuId:"",price:0,shopId:"",count:0,payment:0,totalPrice:0,animatenum:0,totalAllPrice:0,checkboxBig:!1,serviceList:"",empty:!0,emptys:!1,dele:!1}},watch:{},computed:{totalMoney:function(){return this.serviceList.reduce(function(t,s,e){return t+=s.sku.reduce(function(t,s){var e=0;return!0===s.checkboxChild&&(e=s.unitPrice*s.count),t+=e},0)},0)}},created:function(){var t=this;!1===this.$store.getters.isAuthed?this.flag=!0:this.flag=!1,this.$axios.get("shoppingcart/api/shoppingcar/user").then(function(s){t.serviceList=s.data.result,console.log(t.serviceList),void 0==t.serviceList||0==t.serviceList.length?(t.empty=!1,t.emptys=!0):(t.empty=!0,t.emptys=!1)}).catch(function(t){console.log(t)})},methods:{logins:function(){var t={func:"openURL",param:{URL:"/#/login"}},s=navigator.userAgent,e=s.indexOf("Android")>-1||s.indexOf("Adr")>-1;!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.webkit.messageHandlers.GongrongAppModel.postMessage(t):e&&window.androidObject.JSCallAndroid(c()(t))},no:function(){this.dele=!1},sure:function(s,e,i){var c=this,n=[];if(n.push(this.serviceList[e].sku[s].skuid),this.$axios.post("shoppingcart/api/shoppingcar/del",n).then(function(t){"success"==t.data&&(c.dele=!1,c.serviceList[e].sku.splice(s,1))}).catch(function(t){alert(t.response.data.title)}),0==this.serviceList[e].sku.length){this.serviceList.length;t(".shopping_main")[e].remove()}},removeAll:function(){this.dele=!0},add:function(t,s){if(1==this.serviceList[s].sku[t].checkboxChild){var e=this.serviceList[s].sku[t].unitPrice;this.totalPrice+=e}this.serviceList[s].sku[t].count>=this.serviceList[s].sku[t].skuCount?(alert("没有库存了哦"),this.serviceList[s].sku[t].count=this.serviceList[s].sku[t].skuCount):this.serviceList[s].sku[t].count++},subtract:function(t,s){if(this.serviceList[s].sku[t].count>1){if(1==this.serviceList[s].sku[t].checkboxChild){var e=this.serviceList[s].sku[t].unitPrice;this.totalPrice-=e}this.serviceList[s].sku[t].count--}},pageAll:function(t){!0===t.checkbox?t.sku.map(function(t){return t.checkboxChild=!1}):t.sku.map(function(t){return t.checkboxChild=!0});var s=t.sku.reduce(function(t,s){var e=0;return 1==s.checkboxChild&&(e=s.unitPrice*s.count),t+=e},0);t.totalPrice=s,this.totalPrice=s},pageItem:function(t,s,e,i){this.serviceList[s].sku[e].checkboxChild=!this.serviceList[s].sku[e].checkboxChild;var c;c=t.sku.every(function(t){return!0===t.checkboxChild}),this.serviceList[s].checkbox=c;var n=t.sku.reduce(function(t,s){var e=0;return 1==s.checkboxChild&&(e=s.unitPrice*s.count),t+=e},0);this.totalPrice=n,1==this.serviceList[s].sku[e].checkboxChild&&(this.price=this.serviceList[s].sku[e].unitPrice,this.shopId=this.serviceList[s].shopId,this.count=this.serviceList[s].sku[e].count,this.productSkuId=this.serviceList[s].sku[e].skuid,this.payment=this.price*this.count,this.productName=this.serviceList[s].sku[e].skuName,this.productUrl=this.serviceList[s].sku[e].url)},checkboxAll:function(){for(var t=0;t<this.serviceList.length;t++)!0!==this.checkboxBig?(console.log(this.serviceList[t].checkbox),this.serviceList[t].checkbox=!0,this.serviceList[t].sku.map(function(t,s){t.checkboxChild=!0})):(this.serviceList[t].checkbox=!1,this.serviceList[t].sku.map(function(t,s){t.checkboxChild=!1}))},toTal:function(){sessionStorage.setItem("price",this.price),sessionStorage.setItem("productName",this.productName),sessionStorage.setItem("count",this.count),sessionStorage.setItem("productUrl",this.productUrl);var t=this,s={buyerMessage:0,buyerNick:"",shopId:this.shopId,payment:this.payment,postFee:0,paymentType:1,proOrderItems:[{productSkuId:this.productSkuId,count:this.count,price:this.price}]};this.$axios({method:"POST",url:"order/api/depproorders/0",data:s}).then(function(s){console.log(s.data),t.$router.push({name:"ConfirmAnOrder"})}).catch(function(t){500==t.response.data.status?alert("服务器繁忙，请耐心等待"):alert(t.response.data.title)})},goings:function(){var t={func:"closeCurrent",param:{finallyIndex:"2",refreshAll:!0}},s=navigator.userAgent,e=s.indexOf("Android")>-1||s.indexOf("Adr")>-1;!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.webkit.messageHandlers.GongrongAppModel.postMessage(t):e&&window.androidObject.JSCallAndroid(c()(t))}},components:{Foot:n.a}}}).call(s,e("7t+N"))},"DKg/":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("9vpH"),c={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("div",{staticClass:"content"},[t._m(0),t._v(" "),i("div",{staticClass:"shopping_main_all"},[t._l(t.serviceList,function(s,e){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.empty,expression:"empty"}],key:e,staticClass:"shopping_main"},[i("div",{staticClass:"shopping_main_nav"},[i("div",{staticClass:"nav_newmain"},[i("span",{staticClass:"shopping_q"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.checkbox,expression:"item.checkbox"}],staticClass:"checkboxs",attrs:{type:"checkbox",id:"tonglian"},domProps:{checked:Array.isArray(s.checkbox)?t._i(s.checkbox,null)>-1:s.checkbox},on:{click:function(e){t.pageAll(s)},change:function(e){var i=s.checkbox,c=e.target,n=!!c.checked;if(Array.isArray(i)){var a=t._i(i,null);c.checked?a<0&&t.$set(s,"checkbox",i.concat([null])):a>-1&&t.$set(s,"checkbox",i.slice(0,a).concat(i.slice(a+1)))}else t.$set(s,"checkbox",n)}}}),t._v(" "),i("label",{attrs:{for:"tonglian"}})]),t._v(" "),i("span",{staticClass:"nav_newmain_quan",on:{click:function(i){t.ok(s.id,e)}}},[t._v(t._s(s.shopName))])])]),t._v(" "),t._l(s.sku,function(e,c){return i("div",{key:c,staticClass:"contents"},[i("div",{staticClass:"contents_all"},[i("div",{staticClass:"contents_left"},[i("span",{staticClass:"shopping_q"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxChild,expression:"data.checkboxChild"}],staticClass:"checkboxs",attrs:{type:"checkbox",id:"tonglian"},domProps:{checked:Array.isArray(e.checkboxChild)?t._i(e.checkboxChild,null)>-1:e.checkboxChild},on:{click:function(e){t.pageItem(s,s.id,c,e)},change:function(s){var i=e.checkboxChild,c=s.target,n=!!c.checked;if(Array.isArray(i)){var a=t._i(i,null);c.checked?a<0&&t.$set(e,"checkboxChild",i.concat([null])):a>-1&&t.$set(e,"checkboxChild",i.slice(0,a).concat(i.slice(a+1)))}else t.$set(e,"checkboxChild",n)}}}),t._v(" "),i("label",{attrs:{for:"tonglian"}})])]),t._v(" "),i("div",{staticClass:"contents_right"},[i("div",{staticClass:"contents_right_all"},[i("div",{staticClass:"contents_right_img"},[i("img",{attrs:{src:e.url,alt:""}})]),t._v(" "),i("div",{staticClass:"contents_right_matter"},[i("div",{staticClass:"h5"},[t._v(t._s(e.skuName))]),t._v(" "),i("div",{staticClass:"contents_right_center"},[i("div",{staticClass:"cargo"},[t._v("有货（库存"+t._s(e.skuCount)+"件）")]),t._v(" "),i("div",{staticClass:"contents_right_center_count"},[i("span",{staticClass:"minus",on:{click:function(e){t.subtract(c,s.id)}}},[t._v("-")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.count,expression:"data.count"}],staticClass:"inpus",attrs:{type:"text",id:"inpt_s",readonly:"",value:"1"},domProps:{value:e.count},on:{input:function(s){s.target.composing||t.$set(e,"count",s.target.value)}}}),t._v(" "),i("span",{staticClass:"add",on:{click:function(e){t.add(c,s.id)}}},[t._v("+")])])]),t._v(" "),i("div",{staticClass:"contents_right_moneyAll"},[i("div",{staticClass:"contents_right_money"},[t._v("￥ "+t._s(e.unitPrice))]),t._v(" "),i("div",{staticClass:"contents_right_delete"},[i("a",{attrs:{href:"javascript:;"},on:{click:t.removeAll}},[t._v("删除")])])])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.dele,expression:"dele"}],staticClass:"marks"},[i("div",{staticClass:"mark_s"},[i("p",[t._v("确定删除此商品?")]),t._v(" "),i("div",{staticClass:"btn_all"},[i("button",{staticClass:"no",on:{click:t.no}},[t._v("取消")]),i("button",{staticClass:"sure",on:{click:function(i){t.sure(c,s.id,e.skuid)}}},[t._v("删除")])])])])]),t._v(" "),i("div",{staticClass:"shopping_footer"},[i("div",{staticClass:"shopping_footer_left"},[i("div",{staticClass:"all"},[i("span",{staticClass:"shopping_q"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checkboxBig,expression:"checkboxBig"}],staticClass:"checkboxs",attrs:{type:"checkbox",id:"tonglian",value:"通联",name:"sex"},domProps:{checked:Array.isArray(t.checkboxBig)?t._i(t.checkboxBig,"通联")>-1:t.checkboxBig},on:{click:function(s){t.checkboxAll(0)},change:function(s){var e=t.checkboxBig,i=s.target,c=!!i.checked;if(Array.isArray(e)){var n=t._i(e,"通联");i.checked?n<0&&(t.checkboxBig=e.concat(["通联"])):n>-1&&(t.checkboxBig=e.slice(0,n).concat(e.slice(n+1)))}else t.checkboxBig=c}}}),t._v(" "),i("label",{attrs:{for:"tonglian"}})])]),t._v(" "),i("div",{staticClass:"money"},[t._v("合计: ￥ "+t._s(t.totalMoney.toFixed(2)))])]),t._v(" "),i("div",{staticClass:"shopping_footer_right",on:{click:t.toTal}},[t._v("去结算")])])])})],2)}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.emptys,expression:"emptys"}],staticClass:"vacancy"},[t._m(1),t._v(" "),i("div",{staticClass:"kong"},[t._v("购物车是空的")]),t._v(" "),i("button",{staticClass:"going",on:{click:t.goings}},[t._v("去逛逛")])])],2)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],staticClass:"mark"},[i("img",{attrs:{src:e("EPoi"),alt:""}}),t._v(" "),i("p",[t._v("此功能需先登录")]),t._v(" "),i("button",{on:{click:t.logins}},[t._v("登录")])]),t._v(" "),i("Foot")],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"register_header"},[s("p"),this._v(" "),s("p",[this._v("购物车")]),this._v(" "),s("p")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"vacancyImg"},[s("img",{attrs:{src:e("/PSv"),alt:""}})])}]};var n=function(t){e("TOxz")},a=e("VU/8")(i.a,c,!1,n,"data-v-f571066a",null);s.default=a.exports},"L/O1":function(t,s,e){"use strict"},TOxz:function(t,s){}});
//# sourceMappingURL=10.48c81e678bd52fed704c.js.map