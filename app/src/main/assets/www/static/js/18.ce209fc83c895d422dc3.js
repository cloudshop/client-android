webpackJsonp([18],{"2eZn":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("4Eqp"),n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("header",{staticClass:"header"},[a("ul",[a("li",{on:{click:e.back}},[a("span",[e._v("<")])]),e._v(" "),a("li",[e._v("选择支付方式")]),e._v(" "),a("li")])]),e._v(" "),a("div",{staticClass:"center"},[a("p",{staticClass:"center_top"},[e._v("请您尽快完支付 "),a("span",[a("i",[e._v(e._s(this.$route.params.payment))]),e._v("元")])]),e._v(" "),a("div",{staticClass:"change"},[a("p",{staticClass:"one"},[a("img",{attrs:{src:s("tSdY"),alt:""}}),e._v(" "),a("ul",[e._m(0),e._v(" "),a("li",[a("i",{staticClass:"now"},[e._v(e._s(e.money))]),e._v(" "),a("span",{staticClass:"nomoney"},[e._v("(余额不足)")])])]),e._v(" "),e._m(1)]),e._v(" "),e._m(2),e._v(" "),e._m(3)]),e._v(" "),a("button",{staticClass:"botton",on:{click:e.pay}},[e._v("\n               确认支付（"),a("span"),e._v("元）\n           ")])]),e._v(" "),a("div",{staticClass:"del"},[a("div",[e._v("\n             "+e._s(e.type)+"\n         ")]),e._v(" "),a("p",[a("span",{staticClass:"yes",on:{click:e.q}},[e._v("确定")])])]),e._v(" "),a("div",{staticClass:"password"},[a("div",{staticClass:"password_bottom"},[a("span",{on:{click:e.del}},[e._v("×")]),e._v(" "),a("p",{staticClass:"password_p"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.psd,expression:"psd"}],attrs:{type:"password",maxlength:"6",id:"psd",placeholder:"请输入支付密码"},domProps:{value:e.psd},on:{input:function(t){t.target.composing||(e.psd=t.target.value)}}})])])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.bol,expression:"bol"}],staticClass:"msg"},[a("div",{staticClass:"succeed"},[a("h3",[e._v("提示")]),e._v(" "),a("p",[e._v("支付成功")]),e._v(" "),a("span",{on:{click:e.q}},[e._v("确定")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("li",[this._v(" 余额(需支付"),t("b",{staticClass:"need"}),this._v("元)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("input",{attrs:{type:"radio",id:"yue",name:"sex",value:"余额",checked:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"two"},[t("img",{attrs:{src:s("WUXe"),alt:""}}),this._v(" "),this._v("\n              支付宝\n              "),t("span",[t("input",{attrs:{type:"radio",id:"zhifubao",name:"sex",value:"支付宝"}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"two"},[t("img",{attrs:{src:s("5fGY"),alt:""}}),this._v(" "),this._v("\n              微信\n              "),t("span",[t("input",{attrs:{type:"radio",id:"zhifubao",name:"sex",value:"微信"}})])])}]};var o=function(e){s("8hrj")},i=s("VU/8")(a.a,n,!1,o,"data-v-1a22e0c7",null);t.default=i.exports},"4Eqp":function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),n=s.n(a),o=s("mtWM");s.n(o);t.a={data:function(){return{payment:this.$route.params.payment,postFee:this.$route.params.postFee,buyerMessage:this.$route.params.buyerMessage,buyerNick:this.$route.params.buyerNick,shopId:this.$route.params.shopId,productSkuId:this.$route.params.productSkuId,count:this.$route.params.count,price:this.$route.params.price,data:null,money:null,type:null,took:null,web:"",psd:"",bol:!1}},methods:{del:function(){e(".password").fadeOut(200)},sure:function(){this.bol=!1},cancel:function(){e(".del").hide()},q:function(){var t={func:"openURL",param:{URL:"/#/indentAll"}},s=navigator.userAgent,a=s.indexOf("Android")>-1||s.indexOf("Adr")>-1;!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.webkit.messageHandlers.GongrongAppModel.postMessage(t):a&&window.androidObject.JSCallAndroid(n()(t)),e(".del").hide()},OpenindentAll:function(){},back:function(){this.$router.push({name:"ConfirmAnOrder"})},payStatus:function(t,s){this.init=s,e(".del").show(),this.type=t,"success"==this.type?this.type="支付成功":"cancel"==this.type?this.type="用户取消":"failed"==this.type?this.type="支付失败":"unknown"==this.type&&(this.type="未知状态")},pay:function(){var t=this,s=e('input:radio[name="sex"]:checked').val();if("余额"==s){var a={payment:t.payment,postFee:t.postFee,paymentType:1,buyerMessage:t.buyerMessage,buyerNick:t.buyerNick,shopId:Number(t.shopId),proOrderItems:[{productSkuId:Number(t.productSkuId),count:Number(t.count),price:Number(t.price)}]};e(".password").fadeIn(300),this.$axios({method:"post",url:"order/api/depproorders/1",data:a}).then(function(e){t.web=e.request.response}).catch(function(e){console.log(e)})}else if("支付宝"==s){a={payment:t.payment,postFee:t.postFee,paymentType:2,buyerMessage:t.buyerMessage,buyerNick:t.buyerNick,shopId:Number(t.shopId),proOrderItems:[{productSkuId:Number(t.productSkuId),count:Number(t.count),price:Number(t.price)}]};this.$axios({method:"post",url:"order/api/depproorders/1",data:a}).then(function(e){t.took=e.data;var s={func:"pay",param:{payType:"Ali",orderStr:t.took}},a=navigator.userAgent,o=a.indexOf("Android")>-1||a.indexOf("Adr")>-1;!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.webkit.messageHandlers.GongrongAppModel.postMessage(s):o&&window.androidObject.JSCallAndroid(n()(s))}).catch(function(e){console.log(e)})}if("微信"==s){a={payment:t.payment,postFee:t.postFee,paymentType:3,buyerMessage:t.buyerMessage,buyerNick:t.buyerNick,shopId:Number(t.shopId),proOrderItems:[{productSkuId:Number(t.productSkuId),count:Number(t.count),price:Number(t.price)}]};this.$axios({method:"post",url:"order/api/depproorders/1",data:a}).then(function(e){t.took=e.data;var s={func:"pay",param:{payType:"Wechat",orderStr:t.took}},a=navigator.userAgent,o=a.indexOf("Android")>-1||a.indexOf("Adr")>-1;!!a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.webkit.messageHandlers.GongrongAppModel.postMessage(s):o&&window.androidObject.JSCallAndroid(n()(s))}).catch(function(e){console.log(e)})}}},watch:{psd:function(t){var s=this;if(6==t.length){console.log(s.web),e(".password").fadeOut(100),e("#psd").val("");var a=t;this.$axios({method:"post",url:"wallet/api/wallets/balance/pay",data:{orderNo:s.web,password:a}}).then(function(e){console.log(e),"200"==e.status?s.bol=!0:alert("错误")}).catch(function(e){console.log(e);var t=e.response.data.title;alert(t)})}}},created:function(){this.money=sessionStorage.getItem("money")},mounted:function(){window.payStatus=this.payStatus,window.OpenindentAll=this.OpenindentAll,e(".nomoney").hide();var t=e(".center_top i").text();e(".need").text(t),e(".botton span").text(t);var s=e(".now").text();Number(t)>Number(s)?(e(".nomoney").show(),e(".one").css("color","#c8c8c8"),e(".one input").attr("disabled","disabled"),e(".two input").attr("checked","checked")):e(".nomoney").hide()}}}).call(t,s("7t+N"))},"5fGY":function(e,t,s){e.exports=s.p+"static/img/微信.072aad3.png"},"8hrj":function(e,t){}});