webpackJsonp([11],{"/PSv":function(t,s,i){t.exports=i.p+"static/img/shopping.af1b33a.png"},"9vpH":function(t,s,i){"use strict";(function(t){var e=i("mvHQ"),c=i.n(e),n=(i("wtEF"),i("WR8r"));i("L/O1");s.a={data:function(){return{flag:!1,productSkuId:"",price:0,shopId:"",count:0,payment:0,totalPrice:0,animatenum:0,totalAllPrice:0,checkboxBig:!1,serviceList:"",empty:!0,emptys:!1,dele:!1,skuid:"",productName:"",productUrl:""}},watch:{},computed:{totalMoney:function(){return this.serviceList.reduce(function(t,s,i){return t+=s.sku.reduce(function(t,s){var i=0;return!0===s.checkboxChild&&(i=s.unitPrice*s.count),t+=i},0)},0)}},created:function(){var t=this;!1===this.$store.getters.isAuthed?this.flag=!0:this.flag=!1,this.$axios.get("shoppingcart/api/shoppingcar/user").then(function(s){t.serviceList=s.data.result,console.log(t.serviceList),void 0==t.serviceList||0==t.serviceList.length?(t.empty=!1,t.emptys=!0):(t.empty=!0,t.emptys=!1)}).catch(function(t){console.log(t)})},methods:{logins:function(){var t={func:"openURL",param:{URL:"/#/login"}},s=navigator.userAgent,i=s.indexOf("Android")>-1||s.indexOf("Adr")>-1;!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.webkit.messageHandlers.GongrongAppModel.postMessage(t):i&&window.androidObject.JSCallAndroid(c()(t))},no:function(){this.dele=!1,this.skuid=""},sure:function(s,i){var e=this,c=[];if(c.push(this.skuid),console.log(c),this.$axios.post("shoppingcart/api/shoppingcar/del",c).then(function(t){"success"==t.data&&(e.dele=!1,location.reload())}).catch(function(t){alert(t.response.data.title)}),0==this.serviceList[i].sku.length){this.serviceList.length;t(".shopping_main")[i].remove()}},removeAll:function(t){this.dele=!0,this.skuid=t},add:function(t,s){if(1==this.serviceList[s].sku[t].checkboxChild){var i=this.serviceList[s].sku[t].unitPrice;this.totalPrice+=i}this.serviceList[s].sku[t].count>=this.serviceList[s].sku[t].skuCount?(alert("没有库存了哦"),this.serviceList[s].sku[t].count=this.serviceList[s].sku[t].skuCount):this.serviceList[s].sku[t].count++},subtract:function(t,s){if(this.serviceList[s].sku[t].count>1){if(1==this.serviceList[s].sku[t].checkboxChild){var i=this.serviceList[s].sku[t].unitPrice;this.totalPrice-=i}this.serviceList[s].sku[t].count--}},pageAll:function(t){!0===t.checkbox?t.sku.map(function(t){return t.checkboxChild=!1}):t.sku.map(function(t){return t.checkboxChild=!0});var s=t.sku.reduce(function(t,s){var i=0;return 1==s.checkboxChild&&(i=s.unitPrice*s.count),t+=i},0);t.totalPrice=s,this.totalPrice=s},pageItem:function(t,s,i,e){this.serviceList[s].sku[i].checkboxChild=!this.serviceList[s].sku[i].checkboxChild;var c;c=t.sku.every(function(t){return!0===t.checkboxChild}),this.serviceList[s].checkbox=c;var n=t.sku.reduce(function(t,s){var i=0;return 1==s.checkboxChild&&(i=s.unitPrice*s.count),t+=i},0);this.totalPrice=n,1==this.serviceList[s].sku[i].checkboxChild&&(this.price=this.serviceList[s].sku[i].unitPrice,this.shopId=this.serviceList[s].shopId,this.count=this.serviceList[s].sku[i].count,this.productSkuId=this.serviceList[s].sku[i].skuid,this.payment=this.price*this.count,this.productName=this.serviceList[s].sku[i].skuName,this.productUrl=this.serviceList[s].sku[i].url,console.log("↓↓↓↓↓↓"),console.log(this.serviceList),console.log(this.serviceList[s].sku[i].skuName))},checkboxAll:function(){for(var t=0;t<this.serviceList.length;t++)!0!==this.checkboxBig?(console.log(this.serviceList[t].checkbox),this.serviceList[t].checkbox=!0,this.serviceList[t].sku.map(function(t,s){t.checkboxChild=!0})):(this.serviceList[t].checkbox=!1,this.serviceList[t].sku.map(function(t,s){t.checkboxChild=!1}))},toTal:function(){localStorage.setItem("shopId",this.shopId),localStorage.setItem("price",this.price),localStorage.setItem("productName",this.productName),localStorage.setItem("count",this.count),localStorage.setItem("productUrl",this.productUrl);var t={func:"openURL",param:{URL:"/#/ConfirmAnOrder"}},s=navigator.userAgent,i=s.indexOf("Android")>-1||s.indexOf("Adr")>-1;!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.webkit.messageHandlers.GongrongAppModel.postMessage(t):i&&window.androidObject.JSCallAndroid(c()(t))},goings:function(){var t={func:"closeCurrent",param:{finallyIndex:"2",refreshAll:!0}},s=navigator.userAgent,i=s.indexOf("Android")>-1||s.indexOf("Adr")>-1;!!s.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.webkit.messageHandlers.GongrongAppModel.postMessage(t):i&&window.androidObject.JSCallAndroid(c()(t))}},components:{Foot:n.a}}}).call(s,i("7t+N"))},"DKg/":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("9vpH"),c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("div",{staticClass:"shopping_main_all"},[t._l(t.serviceList,function(s,i){return e("div",{directives:[{name:"show",rawName:"v-show",value:t.empty,expression:"empty"}],key:i,staticClass:"shopping_main"},[e("div",{staticClass:"shopping_main_nav"},[e("div",{staticClass:"nav_newmain"},[e("span",{staticClass:"shopping_q"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.checkbox,expression:"item.checkbox"}],staticClass:"checkboxs",attrs:{type:"checkbox",id:"tonglian"},domProps:{checked:Array.isArray(s.checkbox)?t._i(s.checkbox,null)>-1:s.checkbox},on:{click:function(i){t.pageAll(s)},change:function(i){var e=s.checkbox,c=i.target,n=!!c.checked;if(Array.isArray(e)){var a=t._i(e,null);c.checked?a<0&&t.$set(s,"checkbox",e.concat([null])):a>-1&&t.$set(s,"checkbox",e.slice(0,a).concat(e.slice(a+1)))}else t.$set(s,"checkbox",n)}}}),t._v(" "),e("label",{attrs:{for:"tonglian"}})]),t._v(" "),e("span",{staticClass:"nav_newmain_quan",on:{click:function(e){t.ok(s.id,i)}}},[t._v(t._s(s.shopName))])])]),t._v(" "),t._l(s.sku,function(i,c){return e("div",{key:c,staticClass:"contents"},[e("div",{staticClass:"contents_all"},[e("div",{staticClass:"contents_left"},[e("span",{staticClass:"shopping_q"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.checkboxChild,expression:"data.checkboxChild"}],staticClass:"checkboxs",attrs:{type:"checkbox",id:"tonglian"},domProps:{checked:Array.isArray(i.checkboxChild)?t._i(i.checkboxChild,null)>-1:i.checkboxChild},on:{click:function(i){t.pageItem(s,s.id,c,i)},change:function(s){var e=i.checkboxChild,c=s.target,n=!!c.checked;if(Array.isArray(e)){var a=t._i(e,null);c.checked?a<0&&t.$set(i,"checkboxChild",e.concat([null])):a>-1&&t.$set(i,"checkboxChild",e.slice(0,a).concat(e.slice(a+1)))}else t.$set(i,"checkboxChild",n)}}}),t._v(" "),e("label",{attrs:{for:"tonglian"}})])]),t._v(" "),e("div",{staticClass:"contents_right"},[e("div",{staticClass:"contents_right_all"},[e("div",{staticClass:"contents_right_img"},[e("img",{attrs:{src:i.url,alt:""}})]),t._v(" "),e("div",{staticClass:"contents_right_matter"},[e("div",{staticClass:"h5"},[t._v(t._s(i.skuName))]),t._v(" "),e("div",{staticClass:"contents_right_center"},[e("div",{staticClass:"cargo"},[t._v("有货（库存"+t._s(i.skuCount)+"件）")]),t._v(" "),e("div",{staticClass:"contents_right_center_count"},[e("span",{staticClass:"minus",on:{click:function(i){t.subtract(c,s.id)}}},[t._v("-")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:i.count,expression:"data.count"}],staticClass:"inpus",attrs:{type:"text",id:"inpt_s",readonly:"",value:"1"},domProps:{value:i.count},on:{input:function(s){s.target.composing||t.$set(i,"count",s.target.value)}}}),t._v(" "),e("span",{staticClass:"add",on:{click:function(i){t.add(c,s.id)}}},[t._v("+")])])]),t._v(" "),e("div",{staticClass:"contents_right_moneyAll"},[e("div",{staticClass:"contents_right_money"},[t._v("￥ "+t._s(i.unitPrice))]),t._v(" "),e("div",{staticClass:"contents_right_delete"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(s){t.removeAll(i.skuid)}}},[t._v("删除")])])])])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.dele,expression:"dele"}],staticClass:"marks"},[e("div",{staticClass:"mark_s"},[e("p",[t._v("确定删除此商品?")]),t._v(" "),e("div",{staticClass:"btn_all"},[e("button",{staticClass:"no",on:{click:t.no}},[t._v("取消")]),e("button",{staticClass:"sure",on:{click:function(i){t.sure(c,s.id)}}},[t._v("删除")])])])])]),t._v(" "),e("div",{staticClass:"shopping_footer"},[e("div",{staticClass:"shopping_footer_left"},[e("div",{staticClass:"all"},[e("span",{staticClass:"shopping_q"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checkboxBig,expression:"checkboxBig"}],staticClass:"checkboxs",attrs:{type:"checkbox",id:"tonglian",value:"通联",name:"sex"},domProps:{checked:Array.isArray(t.checkboxBig)?t._i(t.checkboxBig,"通联")>-1:t.checkboxBig},on:{click:function(s){t.checkboxAll(0)},change:function(s){var i=t.checkboxBig,e=s.target,c=!!e.checked;if(Array.isArray(i)){var n=t._i(i,"通联");e.checked?n<0&&(t.checkboxBig=i.concat(["通联"])):n>-1&&(t.checkboxBig=i.slice(0,n).concat(i.slice(n+1)))}else t.checkboxBig=c}}}),t._v(" "),e("label",{attrs:{for:"tonglian"}})])]),t._v(" "),e("div",{staticClass:"money"},[t._v("合计: ￥ "+t._s(t.totalMoney.toFixed(2)))])]),t._v(" "),e("div",{staticClass:"shopping_footer_right",on:{click:t.toTal}},[t._v("去结算")])])])})],2)}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.emptys,expression:"emptys"}],staticClass:"vacancy"},[t._m(1),t._v(" "),e("div",{staticClass:"kong"},[t._v("购物车是空的")]),t._v(" "),e("button",{staticClass:"going",on:{click:t.goings}},[t._v("去逛逛")])])],2)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],staticClass:"mark"},[e("img",{attrs:{src:i("EPoi"),alt:""}}),t._v(" "),e("p",[t._v("此功能需先登录")]),t._v(" "),e("button",{on:{click:t.logins}},[t._v("登录")])]),t._v(" "),e("Foot")],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"register_header"},[s("p"),this._v(" "),s("p",[this._v("购物车")]),this._v(" "),s("p")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"vacancyImg"},[s("img",{attrs:{src:i("/PSv"),alt:""}})])}]};var n=function(t){i("GDM4")},a=i("VU/8")(e.a,c,!1,n,"data-v-7acc8c72",null);s.default=a.exports},GDM4:function(t,s){},"L/O1":function(t,s,i){"use strict"}});